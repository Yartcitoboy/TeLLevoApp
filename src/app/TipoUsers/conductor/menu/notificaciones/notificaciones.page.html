<div class="ion-page" #page>
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/conductor-dashboard"></ion-back-button>
      </ion-buttons>
      <ion-title>Notificaciones</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content class="ion-padding">
    <!-- Lista de notificaciones -->
    <ion-list [inset]="true">
      <ion-item *ngFor="let notification of notifications" [button]="true" (click)="openModal(notification)">
        <div class="unread-indicator-wrapper" slot="start">
          <div class="unread-indicator"></div>
        </div>
        <ion-label>
          <strong>{{ notification.sender }}</strong>
          <ion-text>{{ notification.message }}</ion-text><br />
          <ion-note color="medium" class="ion-text-wrap">{{ notification.note }}</ion-note>
        </ion-label>
        <div class="metadata-end-wrapper" slot="end">
          <ion-note color="medium">{{ notification.time }}</ion-note>
          <ion-icon color="medium" name="chevron-forward"></ion-icon>
        </div>
      </ion-item>
    </ion-list>
  
    <!-- Modal para mostrar los detalles de la notificación seleccionada -->
    <ion-modal #modal [canDismiss]="true">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>Detalles de Notificación</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="closeModal()">Cerrar</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <h2>{{ selectedNotification?.sender }}</h2>
          <p><strong>Mensaje:</strong> {{ selectedNotification?.message }}</p>
          <p><strong>Detalles:</strong> {{ selectedNotification?.note }}</p>
          <p><strong>Hora:</strong> {{ selectedNotification?.time }}</p>
        </ion-content>
      </ng-template>
    </ion-modal>
  </ion-content>